(()=>{am5.ready(function(){let a,l,p,u,i,t={level:"regions",selectedRegion:null,selectedCountry:null};a=am5.Root.new("chartdiv"),a.container.set("background",am5.Rectangle.new(a,{fill:am5.color(2306110)})),a.setThemes([am5themes_Animated.new(a)]),l=a.container.children.push(am5map.MapChart.new(a,{panX:"translateX",panY:"translateY",projection:am5map.geoMercator(),minZoomLevel:1}));var f=l.set("zoomControl",am5map.ZoomControl.new(a,{}));f.homeButton.set("visible",!0),p=l.series.push(am5map.MapPolygonSeries.new(a,{geoJSON:am5geodata_worldLow,exclude:["AQ"],geodataNames:am5geodata_lang_TR})),p.mapPolygons.template.setAll({fill:am5.color(8228748),stroke:am5.color(8228748)}),u=l.series.push(am5map.MapPointSeries.new(a,{})),u.bullets.push(function(){let e=am5.Container.new(a,{width:20,height:20,centerX:am5.p50,centerY:am5.p50,cursorOverStyle:"pointer"}),n=e.children.push(am5.Circle.new(a,{radius:10,fill:am5.color(16777215),fillOpacity:0,stroke:am5.color(16777215),strokeWidth:1})),o=e.children.push(am5.Circle.new(a,{radius:5,fill:am5.color(1718331),strokeWidth:0}));return e.states.create("hover",{scale:1.2}),e.events.on("click",function(r){let s=r.target.dataItem.dataContext;s&&s.link&&C(s)}),am5.Bullet.new(a,{sprite:e})});function h(e){let n=null,o=null;return i.regions.forEach(r=>{r.countries.forEach(s=>{s.projects.forEach(d=>{d.id===e.id&&(n=r,o=s)})})}),{selectedRegion:n,selectedCountry:o}}function C(e){let n=h(e);t.level="projects",t.selectedRegion=n.selectedRegion,t.selectedCountry=n.selectedCountry,c("projects"),m(),e.link}async function w(){try{let e=await fetch("./assets/api/data.json");if(!e.ok)throw new Error("JSON dosyas\u0131 y\xFCklenemedi: "+e.status);i=await e.json(),console.log("JSON geldi mi?",i),console.log("B\xF6lge say\u0131s\u0131:",i.regions?.length||0),c("regions");let n=[];i.regions.forEach(o=>{o.countries.forEach(r=>{r.projects.forEach(s=>n.push(s))})}),console.log("Toplam proje say\u0131s\u0131:",n.length),u.data.setAll(n.filter(o=>o.coordinates&&o.coordinates.length===2).map(o=>({geometry:{type:"Point",coordinates:[o.coordinates[1],o.coordinates[0]]},title:o.name,resource:o.resources[0],...o}))),l.goHome()}catch(e){console.error("Veri \xE7ekme hatas\u0131:",e)}}function c(e){let n=document.getElementById("menu-list");if(n.innerHTML="",e!=="regions"){let r=document.createElement("li");r.classList.add("menu-header");let s=document.createElement("button");s.classList.add("back-arrow"),s.setAttribute("aria-label","Geri"),s.setAttribute("title","Geri"),s.classList.add("back-button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M169.4 297.4C156.9 309.9 156.9 330.2 169.4 342.7L361.4 534.7C373.9 547.2 394.2 547.2 406.7 534.7C419.2 522.2 419.2 501.9 406.7 489.4L237.3 320L406.6 150.6C419.1 138.1 419.1 117.8 406.6 105.3C394.1 92.8 373.8 92.8 361.3 105.3L169.3 297.3z"/></svg>',s.onclick=y;let d=document.createElement("span");d.classList.add("menu-title-dynamic"),e==="countries"?d.textContent=t.selectedRegion.name:e==="projects"&&(d.textContent=t.selectedCountry.name),r.appendChild(s),r.appendChild(d),n.appendChild(r)}let o=[];e==="regions"?o=i.regions:e==="countries"?o=t.selectedRegion.countries:e==="projects"&&(o=t.selectedCountry.projects),o.forEach(r=>{let s=document.createElement("li");e==="projects"?(s.innerHTML=`
                <a class="project-item" href="${r.link}" data-id="${r.id}">
                    <div class="project-content">
                        <div class="project-title">${r.name}</div>
                        <div class="project-company">${r.company}</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M471.1 297.4C483.6 309.9 483.6 330.2 471.1 342.7L279.1 534.7C266.6 547.2 246.3 547.2 233.8 534.7C221.3 522.2 221.3 501.9 233.8 489.4L403.2 320L233.9 150.6C221.4 138.1 221.4 117.8 233.9 105.3C246.4 92.8 266.7 92.8 279.2 105.3L471.2 297.3z"/></svg>
                </a>
            `,s.onclick=()=>g(r,e)):(s.innerHTML=`${r.name} <span class="arrow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M471.1 297.4C483.6 309.9 483.6 330.2 471.1 342.7L279.1 534.7C266.6 547.2 246.3 547.2 233.8 534.7C221.3 522.2 221.3 501.9 233.8 489.4L403.2 320L233.9 150.6C221.4 138.1 221.4 117.8 233.9 105.3C246.4 92.8 266.7 92.8 279.2 105.3L471.2 297.3z"></path></svg></span>`,s.onclick=()=>g(r,e)),n.appendChild(s)})}function g(e,n){n==="regions"?(t.level="countries",t.selectedRegion=e,c("countries"),m()):n==="countries"&&(t.level="projects",t.selectedCountry=e,c("projects"),m())}function y(){t.level==="projects"?(t.level="countries",t.selectedCountry=null,c("countries")):t.level==="countries"&&(t.level="regions",t.selectedRegion=null,c("regions")),m()}function m(){let e=[];t.level==="regions"?(i.regions.forEach(n=>{n.countries.forEach(o=>{o.projects.forEach(r=>e.push(r))})}),l.goHome()):t.level==="countries"?(t.selectedRegion.countries.forEach(n=>{n.projects.forEach(o=>e.push(o))}),l.zoomToGeoPoint({latitude:t.selectedRegion.center[0],longitude:t.selectedRegion.center[1]},t.selectedRegion.zoom,!0)):t.level==="projects"?(e=t.selectedCountry.projects,l.zoomToGeoPoint({latitude:t.selectedCountry.center[0],longitude:t.selectedCountry.center[1]},t.selectedCountry.zoom,!0)):l.goHome(),console.log("T\xFCm projeler y\xFCklendi, marker say\u0131s\u0131:",u.data.length),console.log(u.data.values)}w()});})();
